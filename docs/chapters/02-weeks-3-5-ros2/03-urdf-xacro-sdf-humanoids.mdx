---
title: "URDF, Xacro, and SDF: Robot Description for Humanoid Systems"
description: "Comprehensive guide to robot description formats for humanoid robot modeling"
week: "Weeks 3â€“5"
---

# URDF, Xacro, and SDF: Robot Description for Humanoid Systems

## Unified Robot Description Format (URDF): Foundation of Robot Modeling

The Unified Robot Description Format (URDF) serves as the cornerstone for robot modeling in ROS 2, providing a standardized XML-based format for describing robot kinematics, dynamics, and visual properties. URDF defines the physical structure of robots through a tree-like kinematic chain of links connected by joints, enabling simulation, visualization, and control applications to understand robot geometry and capabilities. For humanoid robots, URDF becomes particularly important as it must accurately represent the complex multi-degree-of-freedom structure with numerous joints and links that characterize human-like forms.

URDF elements include links that define rigid bodies with mass, inertia, visual, and collision properties. Joints specify the connection between links with specific degrees of freedom, limits, and dynamics. The kinematic tree structure must form a single connected graph without loops, making it suitable for most serial manipulator and humanoid applications. Each link can contain multiple visual elements for rendering and collision elements for physics simulation, allowing for different representations optimized for each purpose.

```xml
<?xml version="1.0"?>
<robot name="simple_humanoid">
  <!-- Base Link -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.2 0.2 0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 1 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.2 0.2 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <!-- Hip Joint and Torso -->
  <joint name="hip_joint" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.3" rpy="0 0 0"/>
  </joint>

  <link name="torso">
    <visual>
      <geometry>
        <cylinder length="0.8" radius="0.1"/>
      </geometry>
      <material name="gray">
        <color rgba="0.5 0.5 0.5 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.8" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.05"/>
    </inertial>
  </link>

  <!-- Left Leg -->
  <joint name="left_hip" type="revolute">
    <parent link="torso"/>
    <child link="left_thigh"/>
    <origin xyz="0 -0.1 -0.4" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-1.57" upper="1.57" effort="100" velocity="1.0"/>
  </joint>

  <link name="left_thigh">
    <visual>
      <geometry>
        <capsule length="0.4" radius="0.05"/>
      </geometry>
      <material name="red">
        <color rgba="1 0 0 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <capsule length="0.4" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="2.0"/>
      <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="left_knee" type="revolute">
    <parent link="left_thigh"/>
    <child link="left_shin"/>
    <origin xyz="0 0 -0.5" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="0" upper="2.36" effort="100" velocity="1.0"/>
  </joint>

  <link name="left_shin">
    <visual>
      <geometry>
        <capsule length="0.4" radius="0.05"/>
      </geometry>
      <material name="red">
        <color rgba="1 0 0 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <capsule length="0.4" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.5"/>
      <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="left_ankle" type="revolute">
    <parent link="left_shin"/>
    <child link="left_foot"/>
    <origin xyz="0 0 -0.5" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.785" upper="0.785" effort="50" velocity="1.0"/>
  </joint>

  <link name="left_foot">
    <visual>
      <geometry>
        <box size="0.2 0.1 0.05"/>
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <box size="0.2 0.1 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>
    </inertial>
  </link>
</robot>
```

URDF's limitations include the inability to handle complex geometric shapes efficiently, lack of macro capabilities, and difficulty in representing repetitive structures common in humanoid robots. These limitations led to the development of Xacro, which extends URDF capabilities through XML macros and expressions.

## Xacro: Enhancing URDF with Macros and Expressions

Xacro (XML Macros) extends URDF capabilities by providing macro definitions, property definitions, and mathematical expressions that simplify the creation of complex robot models. For humanoid robots with symmetrical limbs and repetitive joint structures, Xacro dramatically reduces the amount of redundant code while improving maintainability and readability. The macro system allows developers to define reusable components like legs, arms, or fingers that can be instantiated multiple times with different parameters.

Xacro properties enable the definition of constants and parameters that can be reused throughout the robot description, making it easy to adjust robot dimensions or properties in a single location. Mathematical expressions allow for calculations based on these properties, enabling dynamic computation of positions, dimensions, and other parameters. The include mechanism allows robot models to be split into modular files that can be combined to create complete robot descriptions.

```xml
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="advanced_humanoid">

  <!-- Properties -->
  <xacro:property name="M_PI" value="3.1415926535897931" />
  <xacro:property name="torso_height" value="0.8" />
  <xacro:property name="thigh_length" value="0.5" />
  <xacro:property name="shin_length" value="0.5" />
  <xacro:property name="foot_size" value="0.2 0.1 0.05" />

  <!-- Materials -->
  <material name="blue">
    <color rgba="0 0 1 1"/>
  </material>
  <material name="red">
    <color rgba="1 0 0 1"/>
  </material>
  <material name="gray">
    <color rgba="0.5 0.5 0.5 1"/>
  </material>

  <!-- Macro for leg -->
  <xacro:macro name="leg" params="prefix side reflect">
    <joint name="${prefix}_hip_joint" type="revolute">
      <parent link="torso"/>
      <child link="${prefix}_thigh"/>
      <origin xyz="0 ${reflect * 0.1} -0.4" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
      <limit lower="-1.57" upper="1.57" effort="100" velocity="1.0"/>
    </joint>

    <link name="${prefix}_thigh">
      <visual>
        <geometry>
          <capsule length="${thigh_length}" radius="0.05"/>
        </geometry>
        <material name="red"/>
      </visual>
      <collision>
        <geometry>
          <capsule length="${thigh_length}" radius="0.05"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="2.0"/>
        <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <joint name="${prefix}_knee_joint" type="revolute">
      <parent link="${prefix}_thigh"/>
      <child link="${prefix}_shin"/>
      <origin xyz="0 0 -${thigh_length}" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
      <limit lower="0" upper="2.36" effort="100" velocity="1.0"/>
    </joint>

    <link name="${prefix}_shin">
      <visual>
        <geometry>
          <capsule length="${shin_length}" radius="0.05"/>
        </geometry>
        <material name="red"/>
      </visual>
      <collision>
        <geometry>
          <capsule length="${shin_length}" radius="0.05"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="1.5"/>
        <inertia ixx="0.015" ixy="0" ixz="0" iyy="0.015" iyz="0" izz="0.001"/>
      </inertial>
    </link>

    <joint name="${prefix}_ankle_joint" type="revolute">
      <parent link="${prefix}_shin"/>
      <child link="${prefix}_foot"/>
      <origin xyz="0 0 -${shin_length}" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
      <limit lower="-0.785" upper="0.785" effort="50" velocity="1.0"/>
    </joint>

    <link name="${prefix}_foot">
      <visual>
        <geometry>
          <box size="${foot_size}"/>
        </geometry>
        <material name="gray"/>
      </visual>
      <collision>
        <geometry>
          <box size="${foot_size}"/>
        </geometry>
      </collision>
      <inertial>
        <mass value="0.5"/>
        <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.002" iyz="0" izz="0.002"/>
      </inertial>
    </link>
  </xacro:macro>

  <!-- Base links -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.2 0.2 0.2"/>
      </geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.2 0.2 0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link>

  <joint name="torso_joint" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.3" rpy="0 0 0"/>
  </joint>

  <link name="torso">
    <visual>
      <geometry>
        <cylinder length="${torso_height}" radius="0.1"/>
      </geometry>
      <material name="gray"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="${torso_height}" radius="0.1"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="5.0"/>
      <inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.05"/>
    </inertial>
  </link>

  <!-- Instantiate legs using macro -->
  <xacro:leg prefix="left_leg" side="left" reflect="1"/>
  <xacro:leg prefix="right_leg" side="right" reflect="-1"/>

</robot>
```

Xacro's advanced features include conditional statements, loops, and mathematical functions that enable sophisticated robot model generation. For humanoid robots with complex kinematic structures, Xacro macros can encapsulate entire limbs, making the overall robot description more modular and easier to maintain.

## SDF: Simulation Description Format for Complex Environments

Simulation Description Format (SDF) serves as the primary robot and environment description format for Gazebo and Ignition simulation environments, providing more advanced features than URDF for complex simulation scenarios. SDF supports multi-body systems, complex joints, custom dynamics, and sophisticated sensor models that are essential for realistic humanoid robot simulation. While URDF is primarily focused on robot kinematics and basic dynamics, SDF extends these capabilities to include detailed simulation parameters and physics properties.

SDF files can contain complete simulation worlds with robots, objects, lighting, and environmental properties. The format supports nested models, allowing complex hierarchical structures and reusable components. SDF's joint definitions include more sophisticated constraint options, including universal joints, ball joints, and custom joint types that may be necessary for accurate humanoid simulation.

```xml
<?xml version="1.0"?>
<sdf version="1.7">
  <world name="humanoid_world">
    <physics type="ode">
      <max_step_size>0.001</max_step_size>
      <real_time_factor>1.0</real_time_factor>
      <real_time_update_rate>1000.0</real_time_update_rate>
    </physics>

    <light name="sun" type="directional">
      <cast_shadows>true</cast_shadows>
      <pose>0 0 10 0 0 0</pose>
      <diffuse>0.8 0.8 0.8 1</diffuse>
      <specular>0.2 0.2 0.2 1</specular>
      <attenuation>
        <range>1000</range>
        <constant>0.9</constant>
        <linear>0.01</linear>
        <quadratic>0.001</quadratic>
      </attenuation>
      <direction>-0.5 0.1 -0.9</direction>
    </light>

    <model name="simple_humanoid">
      <pose>0 0 1 0 0 0</pose>

      <!-- Torso -->
      <link name="torso">
        <pose>0 0 0.5 0 0 0</pose>
        <inertial>
          <mass>5.0</mass>
          <inertia>
            <ixx>0.1</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.1</iyy>
            <iyz>0</iyz>
            <izz>0.05</izz>
          </inertia>
        </inertial>
        <visual name="torso_visual">
          <geometry>
            <cylinder>
              <radius>0.1</radius>
              <length>0.8</length>
            </cylinder>
          </geometry>
          <material>
            <ambient>0.5 0.5 0.5 1</ambient>
            <diffuse>0.5 0.5 0.5 1</diffuse>
            <specular>0.1 0.1 0.1 1</specular>
          </material>
        </visual>
        <collision name="torso_collision">
          <geometry>
            <cylinder>
              <radius>0.1</radius>
              <length>0.8</length>
            </cylinder>
          </geometry>
        </collision>
      </link>

      <!-- Left leg -->
      <link name="left_thigh">
        <pose>0 -0.1 -0.1 0 0 0</pose>
        <inertial>
          <mass>2.0</mass>
          <inertia>
            <ixx>0.02</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.02</iyy>
            <iyz>0</iyz>
            <izz>0.001</izz>
          </inertia>
        </inertial>
        <visual name="left_thigh_visual">
          <geometry>
            <capsule>
              <radius>0.05</radius>
              <length>0.4</length>
            </capsule>
          </geometry>
          <material>
            <ambient>1 0 0 1</ambient>
            <diffuse>1 0 0 1</diffuse>
            <specular>0.1 0.1 0.1 1</specular>
          </material>
        </visual>
        <collision name="left_thigh_collision">
          <geometry>
            <capsule>
              <radius>0.05</radius>
              <length>0.4</length>
            </capsule>
          </geometry>
        </collision>
      </link>

      <joint name="left_hip" type="revolute">
        <parent>torso</parent>
        <child>left_thigh</child>
        <pose>0 -0.1 -0.4 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
          <limit>
            <lower>-1.57</lower>
            <upper>1.57</upper>
            <effort>100</effort>
            <velocity>1.0</velocity>
          </limit>
        </axis>
      </joint>

      <link name="left_shin">
        <pose>0 -0.1 -0.6 0 0 0</pose>
        <inertial>
          <mass>1.5</mass>
          <inertia>
            <ixx>0.015</ixx>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyy>0.015</iyy>
            <iyz>0</iyz>
            <izz>0.001</izz>
          </inertia>
        </inertial>
        <visual name="left_shin_visual">
          <geometry>
            <capsule>
              <radius>0.05</radius>
              <length>0.4</length>
            </capsule>
          </geometry>
          <material>
            <ambient>1 0 0 1</ambient>
            <diffuse>1 0 0 1</diffuse>
            <specular>0.1 0.1 0.1 1</specular>
          </material>
        </visual>
        <collision name="left_shin_collision">
          <geometry>
            <capsule>
              <radius>0.05</radius>
              <length>0.4</length>
            </capsule>
          </geometry>
        </collision>
      </link>

      <joint name="left_knee" type="revolute">
        <parent>left_thigh</parent>
        <child>left_shin</child>
        <pose>0 0 -0.5 0 0 0</pose>
        <axis>
          <xyz>0 0 1</xyz>
          <limit>
            <lower>0</lower>
            <upper>2.36</upper>
            <effort>100</effort>
            <velocity>1.0</velocity>
          </limit>
        </axis>
      </joint>
    </model>

    <!-- Ground plane -->
    <model name="ground_plane">
      <static>true</static>
      <link name="link">
        <collision name="collision">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <surface>
            <friction>
              <ode>
                <mu>1.0</mu>
                <mu2>1.0</mu2>
              </ode>
            </friction>
          </surface>
        </collision>
        <visual name="visual">
          <geometry>
            <plane>
              <normal>0 0 1</normal>
              <size>100 100</size>
            </plane>
          </geometry>
          <material>
            <ambient>0.8 0.8 0.8 1</ambient>
            <diffuse>0.8 0.8 0.8 1</diffuse>
            <specular>0.1 0.1 0.1 1</specular>
          </material>
        </visual>
      </link>
    </model>
  </world>
</sdf>
```

SDF's advanced features include custom plugins that can extend simulation capabilities, sophisticated contact models for accurate physics simulation, and detailed sensor specifications that match real hardware characteristics. For humanoid robots, SDF enables the simulation of complex contact scenarios like walking, running, and manipulation that require accurate physics modeling.

## Humanoid-Specific Modeling Considerations

Humanoid robot modeling presents unique challenges that require careful consideration of kinematic structure, dynamics, and control requirements. The human-like form factor with multiple degrees of freedom in legs, arms, and torso creates complex kinematic chains that must be accurately represented for effective simulation and control. Balance and locomotion algorithms depend on accurate center of mass calculations, inertia tensors, and joint dynamics that reflect the physical properties of the actual robot.

Humanoid robots typically require 6-degree-of-freedom (6DOF) feet for stable walking, with additional joints for toe movement and balance. The ankle joints must be carefully modeled to enable proper balance control and ground contact. The hip structure often includes three degrees of freedom (yaw, pitch, roll) to enable human-like walking patterns and balance recovery.

```xml
<!-- Example of advanced humanoid foot with toe joint -->
<xacro:macro name="advanced_foot" params="prefix reflect">
  <!-- Main foot link -->
  <link name="${prefix}_foot">
    <visual>
      <geometry>
        <box size="0.2 0.1 0.05"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.2 0.1 0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.8"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.003" iyz="0" izz="0.003"/>
    </inertial>
  </link>

  <!-- Toe joint for balance -->
  <joint name="${prefix}_toe_joint" type="revolute">
    <parent link="${prefix}_foot"/>
    <child link="${prefix}_toe"/>
    <origin xyz="0.08 0 -0.025" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.5" upper="0.5" effort="20" velocity="2.0"/>
  </joint>

  <link name="${prefix}_toe">
    <visual>
      <geometry>
        <box size="0.05 0.08 0.02"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.08 0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
  </link>
</xacro:macro>
```

The upper body of humanoid robots requires special attention for manipulation tasks. Shoulder joints typically have three degrees of freedom, while elbow joints have one. The wrist may include additional joints for orientation control. The head often contains pan and tilt joints for vision systems, along with mounting points for cameras and other sensors.

Mass distribution is critical for humanoid robots, as the center of mass must remain within the support polygon during locomotion. Accurate modeling of link masses and inertias ensures that simulation results translate effectively to real-world performance. The torso must be sufficiently massive to provide stability while remaining light enough for efficient actuation.

## Integration with ROS 2 and Simulation Environments

The integration of URDF/Xacro/SDF models with ROS 2 requires several components working together to enable simulation, visualization, and control. The robot state publisher node transforms joint states into TF transforms, allowing other nodes to understand the robot's configuration. The joint state publisher provides simulated or real joint positions for visualization and control algorithms.

For simulation environments like Gazebo, ROS 2 control interfaces connect the robot model to physics simulation, enabling accurate actuator modeling and sensor simulation. The ros2_control framework provides standardized interfaces for hardware abstraction, allowing the same control code to work in simulation and on real robots.

```xml
<!-- ros2_control.xacro -->
<xacro:macro name="ros2_control" params="name">
  <ros2_control name="${name}" type="system">
    <hardware>
      <plugin>gazebo_ros2_control/GazeboSystem</plugin>
    </hardware>
    <joint name="left_hip_joint">
      <command_interface name="position">
        <param name="min">-1.57</param>
        <param name="max">1.57</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="left_knee_joint">
      <command_interface name="position">
        <param name="min">0</param>
        <param name="max">2.36</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="left_ankle_joint">
      <command_interface name="position">
        <param name="min">-0.785</param>
        <param name="max">0.785</param>
      </command_interface>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>
</xacro:macro>
```

The integration also includes sensor plugins that simulate real sensor behavior, including noise models, latency, and field-of-view limitations. These plugins connect to ROS 2 topics, providing sensor data that matches the format and characteristics of real sensors, enabling effective transfer from simulation to reality.