"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[2076],{4588:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(6540),s=a(7710);const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const i=new Uint8Array(16);const c=[];for(let v=0;v<256;++v)c.push((v+256).toString(16).slice(1));function l(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}function d(e,t,a){const n=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(i)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((a=a||0)<0||a+16>t.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[a+e]=n[e];return t}return l(n)}const h=function(e,t,a){return!r.randomUUID||t||e?d(e,t,a):r.randomUUID()};var u={};!function e(t,a,n,s){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o="function"==typeof Path2D&&"function"==typeof DOMMatrix,i=function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),a=e.getContext("2d");a.fillRect(0,0,1,1);var n=e.transferToImageBitmap();a.createPattern(n,"no-repeat")}catch(s){return!1}return!0}();function c(){}function l(e){var n=a.exports.Promise,s=void 0!==n?n:t.Promise;return"function"==typeof s?new s(e):(e(c,c),null)}var d,h,u,m,f,p,x,g,b,v,y,w=(d=i,h=new Map,{transform:function(e){if(d)return e;if(h.has(e))return h.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),h.set(e,t),t},clear:function(){h.clear()}}),N=(f=Math.floor(1e3/60),p={},x=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(u=function(e){var t=Math.random();return p[t]=requestAnimationFrame(function a(n){x===n||x+f-1<n?(x=n,delete p[t],e()):p[t]=requestAnimationFrame(a)}),t},m=function(e){p[e]&&cancelAnimationFrame(p[e])}):(u=function(e){return setTimeout(e,f)},m=function(e){return clearTimeout(e)}),{frame:u,cancel:m}),M=(v={},function(){if(g)return g;if(!n&&r){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{g=new Worker(URL.createObjectURL(new Blob([t])))}catch(a){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("\ud83c\udf8a Could not load worker",a),null}!function(e){function t(t,a){e.postMessage({options:t||{},callback:a})}e.init=function(t){var a=t.transferControlToOffscreen();e.postMessage({canvas:a},[a])},e.fire=function(a,n,s){if(b)return t(a,null),b;var r=Math.random().toString(36).slice(2);return b=l(function(n){function o(t){t.data.callback===r&&(delete v[r],e.removeEventListener("message",o),b=null,w.clear(),s(),n())}e.addEventListener("message",o),t(a,r),v[r]=o.bind(null,{data:{callback:r}})})},e.reset=function(){for(var t in e.postMessage({reset:!0}),v)v[t](),delete v[t]}}(g)}return g}),j={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(e,t,a){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:j[t],a)}function k(e){return e<0?0:Math.floor(e)}function E(e,t){return Math.floor(Math.random()*(t-e))+e}function I(e){return parseInt(e,16)}function P(e){return e.map(S)}function S(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:I(t.substring(0,2)),g:I(t.substring(2,4)),b:I(t.substring(4,6))}}function T(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function A(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function R(e){var t=e.angle*(Math.PI/180),a=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*a-Math.random()*a),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function B(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var a=t.tick++/t.totalTicks,n=t.x+t.random*t.tiltCos,s=t.y+t.random*t.tiltSin,r=t.wobbleX+t.random*t.tiltCos,i=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-a)+")",e.beginPath(),o&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,a,n,s,r,o){var i=new Path2D(e),c=new Path2D;c.addPath(i,new DOMMatrix(t));var l=new Path2D;return l.addPath(c,new DOMMatrix([Math.cos(o)*s,Math.sin(o)*s,-Math.sin(o)*r,Math.cos(o)*r,a,n])),l}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(r-n),.1*Math.abs(i-s),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var c=Math.PI/10*t.wobble,l=.1*Math.abs(r-n),d=.1*Math.abs(i-s),h=t.shape.bitmap.width*t.scalar,u=t.shape.bitmap.height*t.scalar,m=new DOMMatrix([Math.cos(c)*l,Math.sin(c)*l,-Math.sin(c)*d,Math.cos(c)*d,t.x,t.y]);m.multiplySelf(new DOMMatrix(t.shape.matrix));var f=e.createPattern(w.transform(t.shape.bitmap),"no-repeat");f.setTransform(m),e.globalAlpha=1-a,e.fillStyle=f,e.fillRect(t.x-h/2,t.y-u/2,h,u),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(r-n)*t.ovalScalar,Math.abs(i-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,a,n,s,r,o,i,c){e.save(),e.translate(t,a),e.rotate(r),e.scale(n,s),e.arc(0,0,1,o,i,c),e.restore()}(e,t.x,t.y,Math.abs(r-n)*t.ovalScalar,Math.abs(i-s)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var p=Math.PI/2*3,x=4*t.scalar,g=8*t.scalar,b=t.x,v=t.y,y=5,N=Math.PI/y;y--;)b=t.x+Math.cos(p)*g,v=t.y+Math.sin(p)*g,e.lineTo(b,v),p+=N,b=t.x+Math.cos(p)*x,v=t.y+Math.sin(p)*x,e.lineTo(b,v),p+=N;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(s)),e.lineTo(Math.floor(r),Math.floor(i)),e.lineTo(Math.floor(n),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function _(e,a){var o,i=!e,c=!!C(a||{},"resize"),d=!1,h=C(a,"disableForReducedMotion",Boolean),u=r&&!!C(a||{},"useWorker")?M():null,m=i?T:A,f=!(!e||!u)&&!!e.__confetti_initialized,p="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function x(t,a,r){for(var i=C(t,"particleCount",k),c=C(t,"angle",Number),d=C(t,"spread",Number),h=C(t,"startVelocity",Number),u=C(t,"decay",Number),f=C(t,"gravity",Number),p=C(t,"drift",Number),x=C(t,"colors",P),g=C(t,"ticks",Number),b=C(t,"shapes"),v=C(t,"scalar"),y=!!C(t,"flat"),M=function(e){var t=C(e,"origin",Object);return t.x=C(t,"x",Number),t.y=C(t,"y",Number),t}(t),j=i,I=[],S=e.width*M.x,T=e.height*M.y;j--;)I.push(R({x:S,y:T,angle:c,spread:d,startVelocity:h,color:x[j%x.length],shape:b[E(0,b.length)],ticks:g,decay:u,gravity:f,drift:p,scalar:v,flat:y}));return o?o.addFettis(I):(o=function(e,t,a,r,o){var i,c,d=t.slice(),h=e.getContext("2d"),u=l(function(t){function l(){i=c=null,h.clearRect(0,0,r.width,r.height),w.clear(),o(),t()}i=N.frame(function t(){!n||r.width===s.width&&r.height===s.height||(r.width=e.width=s.width,r.height=e.height=s.height),r.width||r.height||(a(e),r.width=e.width,r.height=e.height),h.clearRect(0,0,r.width,r.height),(d=d.filter(function(e){return B(h,e)})).length?i=N.frame(t):l()}),c=l});return{addFettis:function(e){return d=d.concat(e),u},canvas:e,promise:u,reset:function(){i&&N.cancel(i),c&&c()}}}(e,I,m,a,r),o.promise)}function g(a){var n=h||C(a,"disableForReducedMotion",Boolean),s=C(a,"zIndex",Number);if(n&&p)return l(function(e){e()});i&&o?e=o.canvas:i&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(s),document.body.appendChild(e)),c&&!f&&m(e);var r={width:e.width,height:e.height};function g(){if(u){var t={getBoundingClientRect:function(){if(!i)return e.getBoundingClientRect()}};return m(t),void u.postMessage({resize:{width:t.width,height:t.height}})}r.width=r.height=null}function b(){o=null,c&&(d=!1,t.removeEventListener("resize",g)),i&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,f=!1)}return u&&!f&&u.init(e),f=!0,u&&(e.__confetti_initialized=!0),c&&!d&&(d=!0,t.addEventListener("resize",g,!1)),u?u.fire(a,r,b):x(a,r,b)}return g.reset=function(){u&&u.reset(),o&&o.reset()},g}function L(){return y||(y=_(null,{useWorker:!0,resize:!0})),y}a.exports=function(){return L().apply(this,arguments)},a.exports.reset=function(){L().reset()},a.exports.create=_,a.exports.shapeFromPath=function(e){if(!o)throw new Error("path confetti are not supported in this browser");var t,a;"string"==typeof e?t=e:(t=e.path,a=e.matrix);var n=new Path2D(t),s=document.createElement("canvas").getContext("2d");if(!a){for(var r,i,c=1e3,l=c,d=c,h=0,u=0,m=0;m<c;m+=2)for(var f=0;f<c;f+=2)s.isPointInPath(n,m,f,"nonzero")&&(l=Math.min(l,m),d=Math.min(d,f),h=Math.max(h,m),u=Math.max(u,f));r=h-l,i=u-d;var p=Math.min(10/r,10/i);a=[p,0,0,p,-Math.round(r/2+l)*p,-Math.round(i/2+d)*p]}return{type:"path",path:t,matrix:a}},a.exports.shapeFromText=function(e){var t,a=1,n="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,a="scalar"in e?e.scalar:a,s="fontFamily"in e?e.fontFamily:s,n="color"in e?e.color:n);var r=10*a,o=r+"px "+s,i=new OffscreenCanvas(r,r),c=i.getContext("2d");c.font=o;var l=c.measureText(t),d=Math.ceil(l.actualBoundingBoxRight+l.actualBoundingBoxLeft),h=Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent),u=l.actualBoundingBoxLeft+2,m=l.actualBoundingBoxAscent+2;d+=4,h+=4,(c=(i=new OffscreenCanvas(d,h)).getContext("2d")).font=o,c.fillStyle=n,c.fillText(t,u,m);var f=1/a;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[f,0,0,f,-d*f/2,-h*f/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),u,!1);const m=u.exports;u.exports.create;const f=(()=>{if("undefined"!=typeof process&&process.env){if(process.env.NEXT_PUBLIC_BACKEND_URL)return process.env.NEXT_PUBLIC_BACKEND_URL;if(process.env.REACT_APP_BACKEND_URL)return process.env.REACT_APP_BACKEND_URL}if("undefined"!=typeof window){const e=process.env.VERCEL_ENV||process.env.NEXT_PUBLIC_VERCEL_ENV;if("production"===e)return process.env.NEXT_PUBLIC_BACKEND_URL||"https://your-backend-url.onrender.com";if("preview"===e)return process.env.NEXT_PUBLIC_BACKEND_URL||"https://your-staging-backend-url.onrender.com"}return"http://localhost:8000"})(),p="/health",x="/chat";var g=a(4848);const b=({navbarMode:e=!1})=>{const[t,a]=(0,n.useState)(!1),[r,o]=(0,n.useState)([]),[i,c]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1),[u,b]=(0,n.useState)(""),[v,y]=(0,n.useState)(null),[w,N]=(0,n.useState)(!0),{colorMode:M}=(0,s.G)(),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{try{(await fetch(`${f}${p}`)).ok||y("Backend server is not running. Please start the backend server to use the chatbot.")}catch(v){y("Backend server is not running. Please start the backend server to use the chatbot.")}})()},[]),(0,n.useEffect)(()=>{const e=()=>{const e=window.getSelection()?.toString().trim();e&&e.length>10&&b(e)};return document.addEventListener("mouseup",e),document.addEventListener("keyup",e),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("keyup",e)}},[]),(0,n.useEffect)(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[r]),(0,n.useEffect)(()=>{const e=()=>{a(!0)};return document.addEventListener("openMainChat",e),()=>{document.removeEventListener("openMainChat",e)}},[]);const C=()=>{a(!t)},k=async()=>{if(!i.trim()||l)return;const e={id:Date.now().toString(),role:"user",content:i,timestamp:new Date};o(t=>[...t,e]),c(""),d(!0),y(null);try{const e=await fetch(`${f}${x}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:i,selected_text:u||null,conversation_id:E()})});if(!e.ok)throw new Error(`Chat API error: ${e.status} ${e.statusText}`);const a=Date.now().toString(),n={id:a,role:"assistant",content:"",timestamp:new Date};o(e=>[...e,n]);const s=e.headers.get("content-type");if(s&&s.includes("application/json")){const t=await e.json();o(e=>e.map(e=>e.id===a?{...e,content:t.answer||t.response||"I processed your request successfully."}:e))}else{const n=e.body?.getReader();if(n){let e="";for(;;){const{done:t,value:a}=await n.read();if(t)break;const s=(new TextDecoder).decode(a);e+=s}n.releaseLock();try{const t=JSON.parse(e),n=t.answer||t.response||e;o(e=>e.map(e=>e.id===a?{...e,content:n}:e))}catch(t){o(t=>t.map(t=>t.id===a?{...t,content:e}:t))}}else{const t=await e.text();o(e=>e.map(e=>e.id===a?{...e,content:t}:e))}}w&&(m({particleCount:150,spread:70,origin:{y:.6},colors:["#10B981","#F97316","#FBBF24","#8B5CF6"],shapes:["circle","square"]}),N(!1))}catch(v){console.error("Error sending message:",v);const t=v.message||"Failed to connect to the chat service";y(`Failed to connect to the chat service: ${t}`),o(e=>{const a=e[e.length-1];return a&&"assistant"===a.role?[...e.slice(0,-1),{...a,content:`I'm having trouble connecting to the knowledge base. Error: ${t}\n\nTo use the chatbot, please:\n\n1. Make sure you have Python installed\n2. Navigate to the backend directory: \`cd backend\`\n3. Install dependencies: \`pip install -r requirements.txt\`\n4. Start the backend: \`python -m uvicorn app.main:app --host 0.0.0.0 --port 8000\`\n\nThe chatbot will connect to \`http://localhost:8000\` by default.`}]:[...e,{id:Date.now().toString(),role:"assistant",content:`I'm having trouble connecting to the knowledge base. Error: ${t}\n\nTo use the chatbot, please:\n\n1. Make sure you have Python installed\n2. Navigate to the backend directory: \`cd backend\`\n3. Install dependencies: \`pip install -r requirements.txt\`\n4. Start the backend: \`python -m uvicorn app.main:app --host 0.0.0.0 --port 8000\`\n\nThe chatbot will connect to \`http://localhost:8000\` by default.`,timestamp:new Date}]})}finally{d(!1),b("")}},E=()=>{let e=localStorage.getItem("bookChatConversationId");return e||(e=h(),localStorage.setItem("bookChatConversationId",e)),e},I=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},P=()=>{o([]),y(null),N(!0)};return(0,g.jsx)(g.Fragment,{children:e?(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("button",{onClick:C,className:"chat-button","aria-label":"Open chat",title:"Physical AI Assistant",children:"\ud83e\udd16"}),t&&(0,g.jsxs)("div",{className:"chat-modal",children:[(0,g.jsxs)("div",{className:"chat-header",children:[(0,g.jsxs)("div",{className:"chat-header-left",children:[(0,g.jsx)("div",{className:"chat-header-icon",children:"\ud83e\udd16"}),(0,g.jsx)("div",{className:"chat-header-title",children:"Physical AI Assistant"})]}),(0,g.jsx)("div",{className:"chat-header-right",children:(0,g.jsx)("button",{onClick:P,className:"chat-header-button",title:"New Chat",children:"\u2715"})})]}),(0,g.jsxs)("div",{className:"chat-messages",children:[v&&(0,g.jsx)("div",{className:"p-3 rounded-lg mb-4 bg-red-100 border border-red-200 text-red-800",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"mr-2",children:"\u26a0\ufe0f"}),(0,g.jsx)("div",{className:"text-sm",children:v})]})}),0===r.length?(0,g.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,g.jsx)("div",{className:"flex justify-center mb-4",children:(0,g.jsx)("div",{className:"text-4xl",children:"\ud83e\udd16"})}),(0,g.jsx)("p",{className:"font-medium",children:"Ask me anything about the book!"}),u&&(0,g.jsxs)("div",{className:"text-xs mt-3 p-3 rounded-lg bg-blue-100 border border-blue-200",children:[(0,g.jsx)("p",{className:"font-medium mb-1 text-blue-800",children:"Selected text:"}),(0,g.jsxs)("p",{className:"italic",children:[u.substring(0,150),u.length>150?"...":""]})]}),(0,g.jsx)("p",{className:"text-xs mt-4 max-w-xs mx-auto",children:"I can help explain concepts, provide examples, and answer questions from the Physical AI and Humanoid Robotics book."})]}):(0,g.jsxs)(g.Fragment,{children:[r.map(e=>(0,g.jsxs)("div",{className:""+("user"===e.role?"message-user":"message-ai"),children:[(0,g.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,g.jsx)("div",{className:"text-xs mt-1 opacity-70",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id)),l&&(0,g.jsxs)("div",{className:"typing-indicator",children:[(0,g.jsx)("span",{children:"Thinking"}),(0,g.jsx)("div",{className:"typing-dot"}),(0,g.jsx)("div",{className:"typing-dot"}),(0,g.jsx)("div",{className:"typing-dot"})]}),(0,g.jsx)("div",{ref:j})]})]}),(0,g.jsxs)("div",{className:"chat-input-area",children:[u&&(0,g.jsxs)("div",{className:"selected-text-chip",children:[(0,g.jsxs)("div",{className:"selected-text-chip-content",children:['Using: "',u.substring(0,50),u.length>50?"...":"",'"']}),(0,g.jsx)("button",{onClick:()=>b(""),className:"selected-text-chip-close",title:"Remove selection",children:"\xd7"})]}),(0,g.jsx)("div",{className:"flex flex-col space-y-2",children:(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),onKeyPress:I,placeholder:u?"Ask about selected text...":"Ask about Physical AI or select text...",className:"chat-textarea",disabled:l,autoFocus:!0,rows:1}),(0,g.jsx)("button",{onClick:k,disabled:l||!i.trim(),className:"send-button",title:"Send message",children:"\u2192"})]})})]})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{onClick:C,className:"chat-button","aria-label":"Open chat",title:"Physical AI Assistant",children:"\ud83e\udd16"}),t&&(0,g.jsxs)("div",{className:"chat-modal",children:[(0,g.jsxs)("div",{className:"chat-header",children:[(0,g.jsxs)("div",{className:"chat-header-left",children:[(0,g.jsx)("div",{className:"chat-header-icon",children:"\ud83e\udd16"}),(0,g.jsx)("div",{className:"chat-header-title",children:"Physical AI Assistant"})]}),(0,g.jsx)("div",{className:"chat-header-right",children:(0,g.jsx)("button",{onClick:P,className:"chat-header-button",title:"New Chat",children:"\u2715"})})]}),(0,g.jsxs)("div",{className:"chat-messages",children:[v&&(0,g.jsx)("div",{className:"p-3 rounded-lg mb-4 bg-red-100 border border-red-200 text-red-800",children:(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"mr-2",children:"\u26a0\ufe0f"}),(0,g.jsx)("div",{className:"text-sm",children:v})]})}),0===r.length?(0,g.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,g.jsx)("div",{className:"flex justify-center mb-4",children:(0,g.jsx)("div",{className:"text-4xl",children:"\ud83e\udd16"})}),(0,g.jsx)("p",{className:"font-medium",children:"Ask me anything about the book!"}),u&&(0,g.jsxs)("div",{className:"text-xs mt-3 p-3 rounded-lg bg-blue-100 border border-blue-200",children:[(0,g.jsx)("p",{className:"font-medium mb-1 text-blue-800",children:"Selected text:"}),(0,g.jsxs)("p",{className:"italic",children:[u.substring(0,150),u.length>150?"...":""]})]}),(0,g.jsx)("p",{className:"text-xs mt-4 max-w-xs mx-auto",children:"I can help explain concepts, provide examples, and answer questions from the Physical AI and Humanoid Robotics book."})]}):(0,g.jsxs)(g.Fragment,{children:[r.map(e=>(0,g.jsxs)("div",{className:""+("user"===e.role?"message-user":"message-ai"),children:[(0,g.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,g.jsx)("div",{className:"text-xs mt-1 opacity-70",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id)),l&&(0,g.jsxs)("div",{className:"typing-indicator",children:[(0,g.jsx)("span",{children:"Thinking"}),(0,g.jsx)("div",{className:"typing-dot"}),(0,g.jsx)("div",{className:"typing-dot"}),(0,g.jsx)("div",{className:"typing-dot"})]}),(0,g.jsx)("div",{ref:j})]})]}),(0,g.jsxs)("div",{className:"chat-input-area",children:[u&&(0,g.jsxs)("div",{className:"selected-text-chip",children:[(0,g.jsxs)("div",{className:"selected-text-chip-content",children:['Using: "',u.substring(0,50),u.length>50?"...":"",'"']}),(0,g.jsx)("button",{onClick:()=>b(""),className:"selected-text-chip-close",title:"Remove selection",children:"\xd7"})]}),(0,g.jsx)("div",{className:"flex flex-col space-y-2",children:(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)("textarea",{value:i,onChange:e=>c(e.target.value),onKeyPress:I,placeholder:u?"Ask about selected text...":"Ask about Physical AI or select text...",className:"chat-textarea",disabled:l,autoFocus:!0,rows:1}),(0,g.jsx)("button",{onClick:k,disabled:l||!i.trim(),className:"send-button",title:"Send message",children:"\u2192"})]})})]})]})]})})}},8453:(e,t,a)=>{a.d(t,{R:()=>o,x:()=>i});var n=a(6540);const s={},r=n.createContext(s);function o(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);